import{c as d,r as n,o as A,j as e,C as z,S as p,X as E,M,e as L,q as P,k as V,g as F,w as U,l as q}from"./index-BNtek14H.js";import{f as T,Q}from"./helpers-B5wpkohg.js";import{F as G,D as C,Q as H}from"./index-BCkHKH7b.js";import{A as u,C as S,E as O}from"./external-link-4fjdCSdK.js";const X=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Y=d("chevron-down",X);const B=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Z=d("chevron-up",B);const J=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],$=d("copy",J);const K=[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]],W=d("linkedin",K);const ee=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],se=d("message-circle",ee);const ae=[["path",{d:"M8.3 10a.7.7 0 0 1-.626-1.079L11.4 3a.7.7 0 0 1 1.198-.043L16.3 8.9a.7.7 0 0 1-.572 1.1Z",key:"1bo67w"}],["rect",{x:"3",y:"14",width:"7",height:"7",rx:"1",key:"1bkyp8"}],["circle",{cx:"17.5",cy:"17.5",r:"3.5",key:"w3z12y"}]],te=d("shapes",ae),xe=()=>{const[y,f]=n.useState([]),[I,m]=n.useState(!0),[b,j]=n.useState(""),[a,w]=n.useState(null),[re,N]=n.useState(!1),[ie,ne]=n.useState(!1),[h,D]=n.useState(!1);n.useRef(null),n.useEffect(()=>{const s=async t=>{if(t?.email){m(!0);try{const r=P(V(F,"certificates"),U("email","==",t.email)),l=(await q(r)).docs.map(c=>({id:c.id,...c.data()})).sort((c,o)=>(o.timestamp?.seconds||0)-(c.timestamp?.seconds||0));f(l),j("")}catch(r){console.error("Error fetching student certificates:",r),j("Failed to load your certificates. Please try again later.")}finally{m(!1)}}},i=A(L,t=>{t?s(t):(f([]),m(!1))});return()=>i()},[]);const v=s=>{const i=`${window.location.origin}/verify/${s}`;navigator.clipboard.writeText(i),N(!0),setTimeout(()=>N(!1),2e3)},_=s=>{const i=document.querySelector(`#qr-${s}`),t=new XMLSerializer().serializeToString(i),r=document.createElement("canvas"),x=r.getContext("2d"),l=new Image;l.onload=()=>{r.width=l.width,r.height=l.height,x.drawImage(l,0,0);const c=r.toDataURL("image/png"),o=document.createElement("a");o.download=`QR_${s}.png`,o.href=c,o.click()},l.src="data:image/svg+xml;base64,"+btoa(t)},k=s=>{if(s?.ipfsHash){const i=`https://gateway.pinata.cloud/ipfs/${s.ipfsHash}?filename=Certificate_${s.certId}.pdf`;window.open(i,"_blank")}else s?.gatewayUrl?window.open(s.gatewayUrl,"_blank"):alert("PDF not found for this certificate.")},g=(s,i)=>{const t=`${window.location.origin}/verify/${i.certId}`,r=`Check out my verified blockchain certificate for ${i.courseName}!`,x={whatsapp:`https://wa.me/?text=${encodeURIComponent(r+" "+t)}`,linkedin:`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(t)}`,email:`mailto:?subject=${encodeURIComponent("My Verified Certificate")}&body=${encodeURIComponent(r+`

Verify here: `+t)}`};window.open(x[s],"_blank")},R=()=>e.jsxs("div",{className:"bg-white p-6 rounded-3xl border border-gray-100 shadow-sm space-y-4 animate-pulse",children:[e.jsx("div",{className:"h-12 w-12 bg-gray-100 rounded-2xl"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 w-3/4 bg-gray-100 rounded"}),e.jsx("div",{className:"h-3 w-1/2 bg-gray-100 rounded"})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-50 flex justify-between",children:[e.jsx("div",{className:"h-8 w-20 bg-gray-100 rounded-lg"}),e.jsx("div",{className:"h-8 w-20 bg-gray-100 rounded-lg"})]})]});return I?e.jsxs("div",{className:"py-12 space-y-10",children:[e.jsxs("header",{className:"space-y-2",children:[e.jsx("div",{className:"h-10 w-48 bg-gray-100 rounded-xl animate-pulse"}),e.jsx("div",{className:"h-4 w-64 bg-gray-50 rounded animate-pulse"})]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:[1,2,3].map(s=>e.jsx(R,{},s))})]}):b?e.jsxs("div",{className:"py-20 flex flex-col items-center text-center space-y-6",children:[e.jsx("div",{className:"bg-red-50 p-6 rounded-full text-error",children:e.jsx(z,{className:"h-12 w-12"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black text-gray-900",children:"Oops! Something went wrong"}),e.jsx("p",{className:"text-gray-500 mt-2",children:b})]}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-primary text-white px-8 py-3 rounded-2xl font-bold hover:bg-blue-600 transition shadow-lg shadow-blue-100",children:"Try Again"})]}):e.jsxs("div",{className:"py-12 space-y-12",children:[e.jsxs("header",{className:"flex flex-col md:flex-row md:items-end justify-between gap-6 px-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"inline-flex items-center space-x-2 bg-blue-50 text-primary px-4 py-1.5 rounded-full text-xs font-black uppercase tracking-widest",children:[e.jsx(u,{className:"h-4 w-4"}),e.jsx("span",{children:"Personal Inventory"})]}),e.jsx("h1",{className:"text-4xl font-black text-gray-900 tracking-tight",children:"Student Portal"}),e.jsx("p",{className:"text-gray-500 font-medium",children:"Verify, share, and manage your academic achievements."})]}),e.jsxs("div",{className:"bg-white p-4 rounded-3xl border border-gray-100 shadow-sm flex items-center space-x-3",children:[e.jsx("div",{className:"bg-green-50 p-2 rounded-xl text-success",children:e.jsx(S,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Global Status"}),e.jsx("p",{className:"text-sm font-bold text-gray-900",children:"All Records Verified"})]})]})]}),e.jsx("section",{className:"px-4",children:y.length===0?e.jsxs("div",{className:"py-24 flex flex-col items-center text-center space-y-8 bg-gray-50/50 rounded-[4rem] border-2 border-dashed border-gray-100",children:[e.jsxs("div",{className:"bg-white p-10 rounded-[3rem] shadow-xl shadow-gray-200/50 relative",children:[e.jsx(te,{className:"h-20 w-20 text-gray-100"}),e.jsx(p,{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 h-10 w-10 text-gray-200"})]}),e.jsxs("div",{className:"max-w-xs space-y-2",children:[e.jsx("h3",{className:"text-2xl font-black text-gray-900",children:"No certificates yet"}),e.jsx("p",{className:"text-gray-500 font-medium leading-relaxed",children:"Your credentials will appear here automatically once issued by your authorized institution."})]})]}):e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:y.map(s=>e.jsxs("div",{className:"bg-white p-8 rounded-[2.5rem] border border-gray-100 shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300 group relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-[0.03] group-hover:scale-125 transition duration-700 pointer-events-none",children:e.jsx(u,{className:"h-32 w-32"})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("div",{className:"h-14 w-14 bg-blue-50 text-primary rounded-2xl flex items-center justify-center shadow-inner group-hover:bg-primary group-hover:text-white transition duration-500",children:e.jsx(G,{className:"h-7 w-7"})}),e.jsxs("span",{className:"bg-green-50 text-success px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-widest flex items-center gap-1",children:[e.jsx(p,{className:"h-3 w-3"}),"Verified"]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("h3",{className:"text-xl font-black text-gray-900 leading-tight group-hover:text-primary transition-colors line-clamp-2",children:s.courseName}),e.jsx("p",{className:"text-gray-500 text-sm font-medium",children:s.studentName})]}),e.jsxs("div",{className:"flex items-center gap-6 pt-2 border-t border-gray-50",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] font-black text-gray-300 uppercase tracking-widest",children:"Issue Date"}),e.jsx("span",{className:"text-sm font-bold text-gray-900",children:T(s.issueDate)})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] font-black text-gray-300 uppercase tracking-widest",children:"Grade"}),e.jsx("span",{className:"text-sm font-bold text-primary",children:s.grade})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-2",children:[e.jsxs("button",{onClick:()=>w(s),className:"flex items-center justify-center space-x-2 py-3 bg-gray-900 text-white rounded-xl text-xs font-black hover:bg-black transition active:scale-95",children:[e.jsx(O,{className:"h-4 w-4"}),e.jsx("span",{children:"Details"})]}),e.jsxs("button",{onClick:()=>k(s),className:"flex items-center justify-center space-x-2 py-3 bg-gray-100 text-gray-600 rounded-xl text-xs font-black hover:bg-gray-200 transition active:scale-95",children:[e.jsx(C,{className:"h-4 w-4"}),e.jsx("span",{children:"Export"})]})]})]})]},s.id))})}),a&&e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-gray-900/60 backdrop-blur-xl p-4 animate-in fade-in duration-300",children:e.jsxs("div",{className:"bg-white rounded-[2rem] md:rounded-[3rem] shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto relative animate-in zoom-in-95 duration-300 scrollbar-hide",children:[e.jsx("button",{onClick:()=>w(null),className:"absolute top-6 right-6 p-3 bg-gray-50 text-gray-400 hover:text-gray-900 rounded-2xl transition z-20",children:e.jsx(E,{className:"h-6 w-6"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 h-full",children:[e.jsxs("div",{className:"md:col-span-2 bg-gray-50/50 p-6 md:p-10 flex flex-col items-center justify-start space-y-8 border-b md:border-b-0 md:border-r border-gray-100",children:[e.jsxs("div",{className:"relative group mt-8",children:[e.jsx("div",{className:"absolute -inset-4 bg-primary/10 rounded-[3rem] blur-2xl group-hover:bg-primary/20 transition duration-700"}),e.jsx("div",{className:"relative bg-white p-5 rounded-[2.5rem] shadow-xl border-4 border-white shadow-blue-100/50",children:e.jsx(H,{id:`qr-${a.certId}`,value:`${window.location.origin}/verify/${a.certId}`,size:200,level:"H",includeMargin:!0,fgColor:"#1E40AF"})})]}),e.jsxs("div",{className:"text-center w-full",children:[e.jsxs("div",{className:"bg-green-100/50 text-success px-4 py-2 rounded-xl inline-flex items-center gap-2 mb-2",children:[e.jsx(S,{className:"h-4 w-4 fill-green-500 text-white"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Trust Verified"})]}),e.jsx("p",{className:"text-xs text-gray-400 font-medium max-w-[200px] mx-auto leading-relaxed",children:"This document is cryptographically verified on the Polygon Amoy blockchain."})]})]}),e.jsxs("div",{className:"md:col-span-3 p-6 md:p-10 space-y-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("header",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"h-8 w-8 bg-blue-50 text-primary rounded-lg flex items-center justify-center",children:e.jsx(u,{className:"h-4 w-4"})}),e.jsx("span",{className:"text-sm font-bold text-primary",children:"Certified Achievement"})]}),e.jsx("h2",{className:"text-3xl font-black text-gray-900 tracking-tight leading-tight",children:a.courseName}),e.jsxs("p",{className:"text-gray-500 font-medium text-lg mt-2",children:["Issued by ",e.jsx("span",{className:"text-gray-900 font-semibold",children:a.institutionName||`Institution #${a.issuerId.slice(-4)}`})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 bg-gray-50 p-5 rounded-3xl border border-gray-100",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Student"}),e.jsx("p",{className:"font-bold text-gray-900 text-lg",children:a.studentName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Grade"}),e.jsx("p",{className:"font-bold text-primary text-lg",children:a.grade})]})]})]}),e.jsxs("div",{className:"pt-2",children:[e.jsxs("button",{onClick:()=>k(a),className:"w-full py-4 bg-primary text-white rounded-[1.5rem] font-bold text-lg hover:bg-blue-600 transition shadow-lg shadow-blue-100/50 flex items-center justify-center space-x-3 active:scale-95 group",children:[e.jsx(C,{className:"h-5 w-5 group-hover:animate-bounce"}),e.jsx("span",{children:"Download Official PDF"})]}),e.jsx("p",{className:"text-center text-[10px] text-gray-400 font-medium mt-3",children:"You are downloading the original, immutable certificate from IPFS."})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-50",children:[e.jsx("h4",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-gray-400",children:"Share & Verify"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>g("linkedin",a),className:"flex-1 h-12 bg-blue-50 text-blue-600 rounded-xl flex items-center justify-center hover:bg-blue-100 transition",children:e.jsx(W,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>g("whatsapp",a),className:"flex-1 h-12 bg-green-50 text-green-600 rounded-xl flex items-center justify-center hover:bg-green-100 transition",children:e.jsx(se,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>g("email",a),className:"flex-1 h-12 bg-gray-50 text-gray-600 rounded-xl flex items-center justify-center hover:bg-gray-100 transition",children:e.jsx(M,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>v(a.certId),className:"flex-1 h-12 bg-gray-50 text-gray-600 rounded-xl flex items-center justify-center hover:bg-gray-100 transition",children:e.jsx($,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{className:"pt-2",children:[e.jsxs("button",{onClick:()=>D(!h),className:"flex items-center gap-2 text-xs font-bold text-gray-400 hover:text-gray-600 transition",children:[h?e.jsx(Z,{className:"h-3 w-3"}):e.jsx(Y,{className:"h-3 w-3"}),e.jsx("span",{children:"Advanced Technical Details"})]}),h&&e.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-2xl space-y-4 animate-in slide-in-from-top-2 duration-200",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-gray-400",children:"Registry Reference (ID)"}),e.jsxs("div",{className:"flex items-center justify-between bg-white px-3 py-2 rounded-lg border border-gray-100 mt-1",children:[e.jsx("span",{className:"font-mono text-[10px] text-gray-600 truncate",children:a.certId}),e.jsx("button",{onClick:()=>v(a.certId),className:"text-gray-400 hover:text-primary",children:e.jsx($,{className:"h-3 w-3"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[e.jsxs("a",{href:`https://amoy.polygonscan.com/tx/${a.txHash}`,target:"_blank",rel:"noopener noreferrer",className:"w-full py-2.5 px-4 bg-white border border-gray-200 rounded-xl text-[10px] font-bold text-gray-600 hover:border-primary hover:text-primary transition flex items-center justify-center space-x-2",children:[e.jsx(p,{className:"h-3 w-3"}),e.jsx("span",{children:"View Blockchain Proof"})]}),e.jsxs("button",{onClick:()=>_(a.certId),className:"w-full py-2.5 px-4 bg-white border border-gray-200 rounded-xl text-[10px] font-bold text-gray-600 hover:border-primary hover:text-primary transition flex items-center justify-center space-x-2",children:[e.jsx(Q,{className:"h-3 w-3"}),e.jsx("span",{children:"Download QR Image"})]})]})]})]})]})]})]})})]})};export{xe as default};
