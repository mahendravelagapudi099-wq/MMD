import{c as T,r as d,o as Ne,j as e,S as V,C as ve,H as O,a as ke,L as Q,b as Ce,d as Se,M as Ie,e as A,s as De,f as Te,g as Le,h as Z,q as Me,i as Pe,w as He,k as $e}from"./index-CLGL6iu8.js";import{Z as X,C as ee,c as te,g as Re,i as Ee}from"./blockchain-DUF6MwWW.js";import{f as _e,Q as Fe,g as qe,h as Ve}from"./helpers-C6spBZd3.js";import{L as B,D as Oe,Q as Ae}from"./index-D0hQHbdL.js";const Be=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],ze=T("chart-column",Be);const Ke=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Ue=T("chevron-left",Ke);const Ge=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Ye=T("circle-plus",Ge);const We=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Je=T("clock",We);const Qe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Ze=T("users",Qe);class L{constructor(r=0,a="Network Error"){this.status=r,this.text=a}}const Xe=()=>{if(!(typeof localStorage>"u"))return{get:t=>Promise.resolve(localStorage.getItem(t)),set:(t,r)=>Promise.resolve(localStorage.setItem(t,r)),remove:t=>Promise.resolve(localStorage.removeItem(t))}},x={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:Xe()},z=t=>t?typeof t=="string"?{publicKey:t}:t.toString()==="[object Object]"?t:{}:{},et=(t,r="https://api.emailjs.com")=>{if(!t)return;const a=z(t);x.publicKey=a.publicKey,x.blockHeadless=a.blockHeadless,x.storageProvider=a.storageProvider,x.blockList=a.blockList,x.limitRate=a.limitRate,x.origin=a.origin||r},se=async(t,r,a={})=>{const m=await fetch(x.origin+t,{method:"POST",headers:a,body:r}),i=await m.text(),l=new L(m.status,i);if(m.ok)return l;throw l},ae=(t,r,a)=>{if(!t||typeof t!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!r||typeof r!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!a||typeof a!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},tt=t=>{if(t&&t.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},re=t=>t.webdriver||!t.languages||t.languages.length===0,ne=()=>new L(451,"Unavailable For Headless Browser"),st=(t,r)=>{if(!Array.isArray(t))throw"The BlockList list has to be an array";if(typeof r!="string")throw"The BlockList watchVariable has to be a string"},at=t=>!t.list?.length||!t.watchVariable,rt=(t,r)=>t instanceof FormData?t.get(r):t[r],ie=(t,r)=>{if(at(t))return!1;st(t.list,t.watchVariable);const a=rt(r,t.watchVariable);return typeof a!="string"?!1:t.list.includes(a)},le=()=>new L(403,"Forbidden"),nt=(t,r)=>{if(typeof t!="number"||t<0)throw"The LimitRate throttle has to be a positive number";if(r&&typeof r!="string")throw"The LimitRate ID has to be a non-empty string"},it=async(t,r,a)=>{const m=Number(await a.get(t)||0);return r-Date.now()+m},ce=async(t,r,a)=>{if(!r.throttle||!a)return!1;nt(r.throttle,r.id);const m=r.id||t;return await it(m,r.throttle,a)>0?!0:(await a.set(m,Date.now().toString()),!1)},oe=()=>new L(429,"Too Many Requests"),lt=async(t,r,a,m)=>{const i=z(m),l=i.publicKey||x.publicKey,v=i.blockHeadless||x.blockHeadless,f=i.storageProvider||x.storageProvider,u={...x.blockList,...i.blockList},w={...x.limitRate,...i.limitRate};return v&&re(navigator)?Promise.reject(ne()):(ae(l,t,r),tt(a),a&&ie(u,a)?Promise.reject(le()):await ce(location.pathname,w,f)?Promise.reject(oe()):se("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:l,service_id:t,template_id:r,template_params:a}),{"Content-type":"application/json"}))},ct=t=>{if(!t||t.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},ot=t=>typeof t=="string"?document.querySelector(t):t,dt=async(t,r,a,m)=>{const i=z(m),l=i.publicKey||x.publicKey,v=i.blockHeadless||x.blockHeadless,f=x.storageProvider||i.storageProvider,u={...x.blockList,...i.blockList},w={...x.limitRate,...i.limitRate};if(v&&re(navigator))return Promise.reject(ne());const N=ot(a);ae(l,t,r),ct(N);const h=new FormData(N);return ie(u,h)?Promise.reject(le()):await ce(location.pathname,w,f)?Promise.reject(oe()):(h.append("lib_version","4.4.1"),h.append("service_id",t),h.append("template_id",r),h.append("user_id",l),se("/api/v1.0/email/send-form",h))},mt={init:et,send:lt,sendForm:dt,EmailJSResponseStatus:L},xt=async t=>{const r="service_rjzfijv",a="template_dtqa5nj",m="9alo0GdGy75EUyPAJ",i={studentName:t.studentName,courseName:t.courseName,certId:t.certId,verifyLink:`${window.location.origin}/verify/${t.certId}`,studentEmail:t.email,institutionName:t.institutionName};try{const l=await mt.send(r,a,i,m);return console.log("Email sent successfully!",l.status,l.text),l}catch(l){throw console.error("Failed to send email:",l),l}},bt=()=>{const[t,r]=d.useState({studentName:"",studentId:"",courseName:"",grade:"First Class",issueDate:new Date().toISOString().split("T")[0],email:"",institutionName:"MDM Maritime Academy"}),[a,m]=d.useState(!1),[i,l]=d.useState(0),[v,f]=d.useState(!1),[u,w]=d.useState(null),[N,h]=d.useState(""),[M,P]=d.useState(""),[R,K]=d.useState([]),[E,de]=d.useState([]),[k,U]=d.useState({total:0,month:0,today:0,pending:0,rate:100}),[C,me]=d.useState(""),[H,xe]=d.useState(""),[y,$]=d.useState(1),[_,ue]=d.useState(3),[he,G]=d.useState(!1),S=10,Y=async s=>{const n=s||A.currentUser?.uid;if(n)try{const c=Me(Pe(Z,"certificates"),He("issuerId","==",n)),g=(await $e(c)).docs.map(o=>({id:o.id,...o.data()})).sort((o,p)=>(p.timestamp?.seconds||0)-(o.timestamp?.seconds||0));K(g),be(g),F()}catch(c){console.error("Error fetching certificates:",c)}},F=async(s=_)=>{G(!0);try{const n=await Re(s);de(n),ue(s)}finally{G(!1)}};d.useEffect(()=>{const s=Ne(A,n=>{n?Y(n.uid):(K([]),U({total:0,month:0,today:0,pending:0,rate:100}))});return pe(),window.ethereum&&window.ethereum.on("accountsChanged",n=>{P(n[0]||"")}),()=>s()},[]);const pe=async()=>{if(window.ethereum){const s=await window.ethereum.request({method:"eth_accounts"});s.length>0&&P(s[0])}},ge=async()=>{try{h("");const s=await te();s&&P(s)}catch(s){h(s.message||"Failed to connect wallet.")}},be=s=>{const n=new Date,c=n.toISOString().split("T")[0],b=n.getMonth(),g=n.getFullYear(),o={total:s.length,today:s.filter(p=>p.issueDate===c).length,month:s.filter(p=>{const J=new Date(p.issueDate);return J.getMonth()===b&&J.getFullYear()===g}).length,pending:s.filter(p=>p.status==="pending").length,rate:s.length>0?s.filter(p=>p.status==="confirmed").length/s.length*100:100};U(o)},j=s=>{const{name:n,value:c}=s.target;r(b=>({...b,[n]:c}))},fe=()=>!t.studentName||!t.studentId||!t.courseName||!t.issueDate?(h("Please fill in all required fields."),!1):new Date(t.issueDate)>new Date?(h("Issue date cannot be in the future."),!1):!0,ye=s=>{s.preventDefault(),fe()&&(h(""),f(!0))},je=async()=>{f(!1),m(!0),h(""),l(1);try{const s=qe(),n=Ve({...t,certId:s});l(2);let c=M;if(!c){if(c=await te(),!c)throw new Error("Please connect MetaMask.");P(c)}l(3);const b=await Ee(s,n);l(4);const g=await b.wait();l(5);const o={certId:s,...t,certHash:n,txHash:g.hash,blockNumber:Number(g.blockNumber),issuerAddress:M,issuerId:A.currentUser.uid,timestamp:De(),status:"confirmed"};if(await Te(Le(Z,"certificates",s),o),o.email)try{await xt(o)}catch(p){console.error("Auto-email failed:",p)}w(o),l(6),r(p=>({studentName:"",studentId:"",courseName:"",grade:"First Class",issueDate:new Date().toISOString().split("T")[0],email:"",institutionName:p.institutionName})),Y()}catch(s){console.error(s),h(s.reason||s.message||"Failed to issue certificate."),l(0)}finally{m(!1)}},we=()=>{const s=[`Cert ID,Student Name,Student ID,Course,Grade,Issue Date,Hash,TxHash
`],n=R.map(o=>`${o.certId},${o.studentName},${o.studentId},${o.courseName},${o.grade},${o.issueDate},${o.certHash},${o.txHash}`).join(`
`),c=new Blob([s+n],{type:"text/csv"}),b=window.URL.createObjectURL(c),g=document.createElement("a");g.href=b,g.download=`Certificates_${new Date().toISOString().split("T")[0]}.csv`,g.click()},I=d.useMemo(()=>R.filter(s=>{const n=s.studentName.toLowerCase().includes(C.toLowerCase())||s.studentId.toLowerCase().includes(C.toLowerCase())||s.certId.toLowerCase().includes(C.toLowerCase()),c=H?s.issueDate===H:!0;return n&&c}),[R,C,H]),W=d.useMemo(()=>{const s=(y-1)*S;return I.slice(s,s+S)},[I,y]),q=Math.ceil(I.length/S),D=({step:s,label:n,currentStep:c})=>e.jsxs("div",{className:`flex items-center space-x-3 transition-all ${c>=s?"text-primary font-bold":"text-gray-300"}`,children:[e.jsx("div",{className:`h-6 w-6 rounded-full flex items-center justify-center text-xs border-2 ${c>s?"bg-primary border-primary text-white":c===s?"border-primary animate-pulse":"border-gray-200"}`,children:c>s?"✓":s}),e.jsx("span",{className:"text-sm",children:n}),c===s&&e.jsx(B,{className:"h-4 w-4 animate-spin"})]});return e.jsxs("div",{className:"py-8 space-y-10 max-w-7xl mx-auto px-4",children:[e.jsxs("header",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-4xl font-black text-gray-900 tracking-tight flex items-center gap-2",children:[e.jsx(V,{className:"h-10 w-10 text-primary"}),"Registry Management"]}),e.jsx("p",{className:"text-gray-500 font-medium",children:"Issue, manage, and track blockchain-verified credentials."})]}),e.jsx("div",{className:"flex items-center gap-4 bg-white p-2 rounded-2xl shadow-sm border border-gray-100",children:M?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex flex-col items-end text-right pr-2 border-r border-gray-100",children:[e.jsx("span",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest",children:"Active Wallet"}),e.jsx("span",{className:"text-[11px] font-mono font-bold text-gray-900 truncate w-24",children:M})]}),e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-green-50 rounded-xl",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-success animate-pulse"}),e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-success",children:"Shield Active"})]})]}):e.jsxs("button",{onClick:ge,className:"flex items-center gap-2 px-5 py-2.5 bg-primary text-white rounded-xl font-black text-xs hover:bg-blue-600 transition shadow-lg shadow-blue-100 active:scale-95",children:[e.jsx(X,{className:"h-3 w-3 fill-white"}),"Connect MetaMask"]})})]}),e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-4",children:[{label:"Total Certificates",val:k.total,icon:Ze,color:"text-blue-600",bg:"bg-blue-50"},{label:"Issued This Month",val:k.month,icon:ee,color:"text-purple-600",bg:"bg-purple-50"},{label:"Issued Today",val:k.today,icon:X,color:"text-yellow-600",bg:"bg-yellow-50"},{label:"Pending",val:k.pending,icon:Je,color:"text-orange-600",bg:"bg-orange-50"},{label:"Success Rate",val:`${Math.round(k.rate)}%`,icon:ze,color:"text-green-600",bg:"bg-green-50"}].map((s,n)=>e.jsxs("div",{className:"bg-white p-5 rounded-3xl border border-gray-100 shadow-sm hover:shadow-md transition group",children:[e.jsx("div",{className:`h-10 w-10 ${s.bg} ${s.color} rounded-2xl flex items-center justify-center mb-3 group-hover:scale-110 transition`,children:e.jsx(s.icon,{className:"h-5 w-5"})}),e.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:s.label}),e.jsx("p",{className:"text-2xl font-black text-gray-900",children:s.val})]},n))}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-10",children:[e.jsxs("section",{className:"lg:col-span-1 bg-white p-8 rounded-[2.5rem] shadow-xl border border-gray-100 space-y-8 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-5",children:e.jsx(V,{className:"h-32 w-32"})}),e.jsxs("div",{className:"space-y-2 relative",children:[e.jsx("h2",{className:"text-2xl font-black text-gray-900",children:"Issue Certificate"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Create a permanent record for a student."})]}),e.jsxs("form",{onSubmit:ye,className:"space-y-5",children:[e.jsxs("div",{className:"grid gap-5",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest ml-1",children:"Student Name"}),e.jsx("input",{type:"text",name:"studentName",required:!0,className:"w-full px-5 py-3.5 bg-gray-50 border-2 border-gray-50 rounded-2xl focus:bg-white focus:border-primary focus:ring-4 focus:ring-blue-100 transition-all outline-none",placeholder:"e.g. John Doe",value:t.studentName,onChange:j,disabled:a})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest ml-1",children:"Institution Name"}),e.jsx("input",{type:"text",name:"institutionName",required:!0,className:"w-full px-5 py-3.5 bg-gray-50 border-2 border-gray-50 rounded-2xl focus:bg-white focus:border-primary transition-all outline-none",placeholder:"e.g. MREM College",value:t.institutionName,onChange:j,disabled:a})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest ml-1",children:"Student ID"}),e.jsx("input",{type:"text",name:"studentId",required:!0,className:"w-full px-5 py-3.5 bg-gray-50 border-2 border-gray-50 rounded-2xl focus:bg-white focus:border-primary transition-all outline-none uppercase font-bold tracking-tight",placeholder:"e.g. CS2024001",value:t.studentId,onChange:j,disabled:a})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest ml-1",children:"Course Name"}),e.jsx("input",{type:"text",name:"courseName",required:!0,className:"w-full px-5 py-3.5 bg-gray-50 border-2 border-gray-50 rounded-2xl focus:bg-white focus:border-primary transition-all outline-none",placeholder:"e.g. Full Stack Development",value:t.courseName,onChange:j,disabled:a})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest ml-1",children:"Grade"}),e.jsxs("select",{name:"grade",className:"w-full px-4 py-3.5 bg-gray-50 border-2 border-gray-50 rounded-2xl focus:bg-white focus:border-primary transition-all outline-none",value:t.grade,onChange:j,disabled:a,children:[e.jsx("option",{children:"First Class"}),e.jsx("option",{children:"Second Class"}),e.jsx("option",{children:"Third Class"}),e.jsx("option",{children:"Pass"}),e.jsx("option",{children:"Distinction"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest ml-1",children:"Issue Date"}),e.jsx("input",{type:"date",name:"issueDate",required:!0,className:"w-full px-4 py-3.5 bg-gray-50 border-2 border-gray-50 rounded-2xl focus:bg-white focus:border-primary transition-all outline-none",value:t.issueDate,onChange:j,max:new Date().toISOString().split("T")[0],disabled:a})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest ml-1",children:"Email (Optional)"}),e.jsx("input",{type:"email",name:"email",className:"w-full px-5 py-3.5 bg-gray-50 border-2 border-gray-50 rounded-2xl focus:bg-white focus:border-primary transition-all outline-none",placeholder:"student@example.com",value:t.email,onChange:j,disabled:a})]})]}),e.jsxs("button",{type:"submit",disabled:a,className:"w-full bg-primary text-white py-4 rounded-2xl font-black text-lg hover:bg-blue-600 transition flex items-center justify-center space-x-3 shadow-xl shadow-blue-100 disabled:opacity-50 active:scale-95",children:[a?e.jsx(B,{className:"h-6 w-6 animate-spin"}):e.jsx(Ye,{className:"h-6 w-6"}),e.jsx("span",{children:a?"Processing...":"Issue to Blockchain"})]})]}),i>0&&i<6&&e.jsxs("div",{className:"pt-4 space-y-4 border-t border-gray-50 animate-in fade-in slide-in-from-bottom-2",children:[e.jsx("h4",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-gray-400",children:"Transaction Pulse"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(D,{step:1,label:"Calculating Hash",currentStep:i}),e.jsx(D,{step:2,label:"Blockchain Connection",currentStep:i}),e.jsx(D,{step:3,label:"Submitting to Polygon",currentStep:i}),e.jsx(D,{step:4,label:"Waiting Confirmation",currentStep:i}),e.jsx(D,{step:5,label:"Global Storage",currentStep:i})]})]}),N&&e.jsx("div",{className:"p-4 bg-red-50 border-l-4 border-error rounded-r-2xl text-error text-xs font-bold animate-in bounce-in",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ve,{className:"h-4 w-4"}),e.jsx("span",{children:N})]})})]}),e.jsxs("section",{className:"lg:col-span-2 space-y-8",children:[e.jsxs("div",{className:"bg-gray-900 rounded-[2.5rem] p-8 shadow-2xl relative overflow-hidden text-white border border-white/5",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-5",children:e.jsx(O,{className:"h-24 w-24"})}),e.jsxs("div",{className:"flex items-center justify-between mb-8 relative",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 bg-primary/20 rounded-xl flex items-center justify-center",children:e.jsx(O,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black tracking-tight",children:"Mini Explorer"}),e.jsx("p",{className:"text-[10px] text-gray-400 font-black uppercase tracking-widest",children:"Local Transaction Pulse"})]})]}),e.jsx("button",{onClick:F,className:"px-4 py-2 bg-white/5 hover:bg-white/10 rounded-xl text-[10px] font-black uppercase tracking-widest transition border border-white/10",children:"Refresh"})]}),e.jsxs("div",{className:"space-y-4 relative",children:[he&&e.jsx("div",{className:"absolute inset-0 bg-gray-900/10 backdrop-blur-[1px] z-10 flex items-center justify-center rounded-2xl",children:e.jsx(B,{className:"h-6 w-6 text-primary animate-spin"})}),E.length>0?e.jsxs(e.Fragment,{children:[E.map((s,n)=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-2xl border border-white/10 group hover:border-primary/50 transition duration-300",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-success animate-pulse"}),e.jsxs("div",{className:"max-w-[200px] md:max-w-xs",children:[e.jsx("p",{className:"font-mono text-[10px] text-gray-300 group-hover:text-white transition truncate",children:s.hash}),e.jsxs("p",{className:"text-[9px] font-black text-gray-500 uppercase flex items-center gap-2",children:[e.jsxs("span",{children:["Block #",s.blockNumber]}),e.jsx("span",{className:"opacity-20",children:"•"}),e.jsx("span",{children:new Date(s.timestamp*1e3).toLocaleTimeString()})]})]})]}),e.jsx("span",{className:"px-3 py-1 bg-success/10 text-success text-[8px] font-black uppercase tracking-widest rounded-lg flex-shrink-0",children:"Confirmed"})]},n)),E.length>=_&&e.jsx("button",{onClick:()=>F(_+3),className:"w-full py-3 bg-white/5 hover:bg-white/10 text-[9px] font-black uppercase tracking-widest text-gray-400 rounded-xl border border-dashed border-white/10 transition",children:"Load More History"})]}):e.jsxs("div",{className:"py-10 text-center opacity-30",children:[e.jsx(O,{className:"h-10 w-10 mx-auto mb-2"}),e.jsx("p",{className:"text-[10px] font-black uppercase",children:"No local transactions found"})]})]})]}),e.jsxs("div",{className:"bg-white p-8 rounded-[2.5rem] shadow-sm border border-gray-100 space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ke,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-300"}),e.jsx("input",{type:"text",placeholder:"Search by student, ID or certificate ref...",className:"w-full pl-12 pr-4 py-3.5 bg-gray-50 border border-gray-100 rounded-2xl focus:bg-white focus:ring-4 focus:ring-blue-100 outline-none transition-all",value:C,onChange:s=>{me(s.target.value),$(1)}})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ee,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"date",className:"pl-9 pr-3 py-3 bg-gray-50 border border-gray-100 rounded-xl text-sm outline-none focus:bg-white transition-all",value:H,onChange:s=>{xe(s.target.value),$(1)}})]}),e.jsxs("button",{onClick:we,className:"flex items-center space-x-2 px-6 py-3 bg-gray-900 text-white rounded-xl font-bold text-sm hover:bg-black transition shadow-lg active:scale-95",children:[e.jsx(Oe,{className:"h-4 w-4"}),e.jsx("span",{children:"Export"})]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-gray-400 text-[10px] font-black uppercase tracking-widest border-b border-gray-50",children:[e.jsx("th",{className:"pb-4 px-2",children:"Cert ID"}),e.jsx("th",{className:"pb-4",children:"Student"}),e.jsx("th",{className:"pb-4",children:"Course"}),e.jsx("th",{className:"pb-4 text-center",children:"Date"}),e.jsx("th",{className:"pb-4 text-center",children:"Status"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-50",children:[W.map(s=>e.jsxs("tr",{className:"group hover:bg-gray-50/50 transition duration-300",children:[e.jsx("td",{className:"py-5 px-2",children:e.jsx(Q,{to:`/verify/${s.certId}`,className:"text-primary font-black hover:underline tracking-tight",children:s.certId.split("-").slice(-1)})}),e.jsx("td",{className:"py-5",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-bold text-gray-900",children:s.studentName}),e.jsx("span",{className:"text-[10px] text-gray-400 uppercase font-black tracking-tight",children:s.studentId})]})}),e.jsx("td",{className:"py-5",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600 truncate max-w-[150px]",children:s.courseName}),e.jsx("span",{className:"text-[10px] text-primary italic font-bold",children:s.grade})]})}),e.jsx("td",{className:"py-5 text-center text-xs font-bold text-gray-500",children:_e(s.issueDate)}),e.jsx("td",{className:"py-5 text-center",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-widest ${s.status==="confirmed"?"bg-green-100 text-success":"bg-orange-100 text-orange-600"}`,children:s.status})})]},s.id)),W.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"py-20 text-center",children:e.jsxs("div",{className:"flex flex-col items-center opacity-20",children:[e.jsx(Fe,{className:"h-16 w-16 mb-2"}),e.jsx("p",{className:"font-black",children:"No records found matching your search"})]})})})]})]})}),q>1&&e.jsxs("div",{className:"flex items-center justify-between pt-6 border-t border-gray-50",children:[e.jsxs("p",{className:"text-xs font-bold text-gray-400",children:["Showing ",(y-1)*S+1," to ",Math.min(y*S,I.length)," of ",I.length]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>$(s=>Math.max(1,s-1)),disabled:y===1,className:"p-2 hover:bg-gray-100 rounded-lg disabled:opacity-20 transition",children:e.jsx(Ue,{className:"h-5 w-5"})}),e.jsx("span",{className:"text-sm font-black w-8 text-center",children:y}),e.jsx("button",{onClick:()=>$(s=>Math.min(q,s+1)),disabled:y===q,className:"p-2 hover:bg-gray-100 rounded-lg disabled:opacity-20 transition",children:e.jsx(Ce,{className:"h-5 w-5"})})]})]})]})]})]}),v&&e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-gray-900/60 backdrop-blur-sm p-4 animate-in fade-in duration-300",children:e.jsxs("div",{className:"bg-white rounded-[3rem] p-10 max-w-lg w-full shadow-2xl space-y-8 animate-in zoom-in-95 duration-300",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"h-20 w-20 bg-blue-50 text-primary rounded-[2rem] flex items-center justify-center mx-auto shadow-inner",children:e.jsx(V,{className:"h-10 w-10"})}),e.jsx("h3",{className:"text-3xl font-black text-gray-900",children:"Verify & Issue"}),e.jsxs("p",{className:"text-gray-500 font-medium leading-relaxed",children:["You are about to anchor this certificate to the blockchain. This action is ",e.jsx("span",{className:"text-gray-900 font-bold underline",children:"permanent and immutable"}),"."]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-3xl p-6 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center px-2",children:[e.jsx("span",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Student"}),e.jsx("span",{className:"font-bold text-gray-900",children:t.studentName})]}),e.jsxs("div",{className:"flex justify-between items-center px-2",children:[e.jsx("span",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Course"}),e.jsx("span",{className:"font-bold text-gray-900",children:t.courseName})]}),e.jsxs("div",{className:"flex justify-between items-center px-2",children:[e.jsx("span",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Institution"}),e.jsx("span",{className:"font-bold text-gray-900",children:t.institutionName})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-4",children:[e.jsx("button",{onClick:()=>f(!1),className:"flex-1 py-4 px-6 rounded-2xl font-black border-2 border-gray-100 text-gray-400 hover:bg-gray-50 transition active:scale-95",children:"Go Back"}),e.jsx("button",{onClick:je,className:"flex-1 py-4 px-6 rounded-2xl font-black bg-primary text-white hover:bg-blue-600 shadow-xl shadow-blue-100 transition active:scale-95",children:"Confirm Issuance"})]})]})}),u&&e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-gray-900/60 backdrop-blur-sm p-4 animate-in fade-in duration-300",children:e.jsxs("div",{className:"bg-white rounded-[3.5rem] p-12 max-w-xl w-full shadow-2xl space-y-10 relative overflow-hidden animate-in zoom-in-95 duration-300",children:[e.jsx("div",{className:"absolute top-0 right-0 p-12 bg-green-50 rounded-bl-[5rem] -mr-16 -mt-16 pointer-events-none"}),e.jsxs("div",{className:"text-center space-y-3 relative z-10",children:[e.jsx(Se,{className:"h-16 w-16 text-success mx-auto drop-shadow-lg"}),e.jsx("h3",{className:"text-4xl font-black text-gray-900 tracking-tight",children:"Success!"}),e.jsxs("p",{className:"text-gray-500 font-medium",children:["The certificate has been anchored successfully.",u.email&&" An automated notification has been sent to the student."]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-10 bg-gray-50/50 p-8 rounded-[2.5rem] border border-gray-100",children:[e.jsx("div",{className:"bg-white p-4 rounded-3xl shadow-lg shadow-gray-200/50 hover:scale-105 transition duration-500",children:e.jsx(Ae,{value:`${window.location.origin}/verify/${u.certId}`,size:140,level:"H",includeMargin:!0})}),e.jsxs("div",{className:"space-y-4 flex-1",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-gray-400",children:"Registry ID"}),e.jsx("p",{className:"font-mono text-lg font-black text-primary tracking-tighter",children:u.certId})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-gray-400",children:"Student"}),e.jsx("p",{className:"font-bold text-gray-900",children:u.studentName})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(Q,{to:`/verify/${u.certId}`,className:"flex-1 py-3 bg-gray-900 text-white rounded-xl text-xs font-black text-center hover:bg-black transition",children:"View On-Chain"}),e.jsxs("a",{href:`mailto:${u.email}?subject=Your Certificate is Ready!&body=Hello ${u.studentName}, your certificate for ${u.courseName} from ${u.institutionName} has been issued and anchored on the blockchain. Verifiable at: ${window.location.origin}/verify/${u.certId}`,className:"flex-1 py-3 bg-primary text-white rounded-xl text-xs font-black text-center hover:bg-blue-600 transition flex items-center justify-center gap-2",children:[e.jsx(Ie,{className:"h-3 w-3"}),"Share to Student"]})]})]})]}),e.jsx("button",{onClick:()=>w(null),className:"w-full py-5 rounded-[1.8rem] font-black bg-white border-4 border-gray-100 text-gray-900 hover:bg-gray-50 hover:border-gray-200 transition-all shadow-sm active:scale-95",children:"Done, Return to Dashboard"})]})})]})};export{bt as default};
